<!DOCTYPE html>
<html ng-app>
	<head>
		<meta name="author" content="Ziga C">
	    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	    <title>Student.INFO</title>
	    
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js" ></script>
	    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
	    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js" ></script>
		
		<script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>

		<!--<script src='/socket.io/socket.io.js' type='text/javascript'></script>-->
		<script src="vmesnik.js"></script>
		
	    <meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="stylesheet" type="text/css" href="style.css">

	</head>
	<body onload="checkCookie()">
		<div class="container-float">
			
			<!-- meni -->
			<!--<h5>-->
			<nav class="navbar navbar-default navbar-static-top">
				<div class="container-fluid">
					<div class="nav navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>                        
						</button>
						<a class="navbar-brand" href="index.html">
							Student.INFO
						</a>
					</div>
				
				<div class="collapse navbar-collapse" id="myNavbar">
				  <i>
				  <ul class="nav navbar-nav">
					<li id="imeStudent" class="nb-item"><!--<a href="">Ime Studenta</a>--></li>
					<li id="program" class="nb-item"><!--<a href="">Letnik</a>--></li>
					<!-- podatke o studentu daj v "<a href=""></a>" in v taprav li z ID-->
				  </ul>
				  </i>
				  <ul class="nav navbar-nav navbar-right">
					<!--<li><a href="https://github.com/MikroMan/dragon_hack">GitHub</a></li>-->
					
					<li id="dolociPredmete">
						<a href="javascript:hide(setSubjects)">Določi predmete</a>
					</li>

					<li id="dolociPredmete2">
						<a href="javascript:changeSubjects()">Določi predmete2</a>
					</li>

					<li id="">
						<a href="about.html">O Student.INFO</a>
					</li>

					<li id="dropmeni" class="dropdown">
					  <a class="dropdown-toggle" data-toggle="dropdown" href="">Meni <span class="caret"></span></a>
					  <ul class="dropdown-menu">
						<li class="nb-item"><a class="podmeni" href="http://www.fri.uni-lj.si/">Spletna stran FRI</a></li>
						<li class="nb-item"><a class="podmeni" href="https://studij.fri.uni-lj.si/DashboardStudent">StudIS</a></li>
						<li class="nb-item"><a class="podmeni" href="https://ucilnica.fri.uni-lj.si/">Spletna ucilnica</a></li>
						<li class="nb-item"><a class="podmeni" href="https://urnik.fri.uni-lj.si/">Urnik</a></li>
					  </ul>
					</li>
				  </ul>
				</div>
				
			  </div>
			</nav>
			<!--</h5>-->
			<!-- meni -->

			<div class="row" id="setSubjects">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<div class="panel panel-default">

						<div class="panel-heading">
							<b>Nastavi predmete</b>
							<a href="javascript:hide(setSubjects)">zapri</a>
						</div>

						<div class="panel-body" id="subjectChkBox">

						</div>
					</div>
				</div>
			</div>


			<div class="row" id="vizitke">
				<!-- SEM  NOTER SE PO IZVRSITVI vmesnik.js-ja VSTAVI VSE ZA PREDMETE -->
			</div>

			<hr>
			<footer class="footer">
				<div class="container">
					<div class="text-muted" style="text-align:center;">
						Copyright Team Frikoti 2015 ( Team Frikoti @ DragonHack Ljubljana, 16. & 17. 5. 2015 )
						</br>
						Further development: Team Frikoti and other students @ 
						<a href="http://www.fri.uni-lj.si/" target="_blank">
							University of Ljubljana, Faculty of computer and information science
						</a>
					</div>
				</div>
			</footer>

		</div>
		
		
		<script type="text/javascript">
	/*
	*	@author ActoreX
	*/
	$(document).ready(function() {

	  $.ajaxSetup({ cache: true });
	  $.getScript('//connect.facebook.net/en_US/sdk.js', function(){
	    FB.init({
	      appId: '295943783863196',
	      version: 'v2.3' // or v2.0, v2.1, v2.0
	    });
	    FB.api(
		    "/277043842434769/feed?limit=50",
		    "get",
		    {access_token : "CAAENKMgcU5wBAJ7uHPxKJKl8ZCwrIOXSX12ZAPKJ4elOG34C0eO6BaZCZBZBTL77kaULGd6CWRzQxALNrFf0j7OEotcy2WT1rHr8C2Yt7NxiQwMmHqqJZBiLBAZC9f4UKRxRHZB0PODn3ZCXYW5GyuC67430hFzKDTlgR8YZBIDdvlFojI25WIhb3uoDQGNJHUg2GhdabqOEAoo2jjjf4CiGYf"},
		    function (response) {
		      if (response && !response.error) {
		        /* handle the result */

		        var APS2 = [];
		        var ORS = [];
		        var TIS = [];
		        var PPJ = [];
		        for(i = 0; i < response['data'].length; i++) {
		        	var msg = response['data'][i]['message']; 				// msg
		        	var link = response['data'][i]['actions'][0]['link']; 	// link to post
		        	var userid = response['data'][i]['from']['id']; 			// user id
		        	var username = response['data'][i]['from']['name']; 			// user name
		        	var time = response['data'][i]['created_time']; 			// time created

		        	if(msg != null)  {
		        		if(msg.toUpperCase().indexOf("[APS2") == 0) {
		        			APS2.push({'msg':msg, 'link':link, 'userid':userid, 'time':time, 'name':username});
		        		} else if(msg.toUpperCase().indexOf("[ORS") == 0) {
		        			ORS.push({'msg':msg, 'link':link, 'userid':userid, 'time':time, 'name':username});
		        		} else if(msg.toUpperCase().indexOf("[TIS") == 0) {
		        			TIS.push({'msg':msg, 'link':link, 'userid':userid, 'time':time, 'name':username});
		        		} else if(msg.toUpperCase().indexOf("[PPJ") == 0) {
		        			PPJ.push({'msg':msg, 'link':link, 'userid':userid, 'time':time, 'name':username});
		        		} 

		        	}
		        		
		        }
		        	

		        var facebookFeed = {'APS2':APS2, 'ORS':ORS, 'TIS':TIS, 'PPJ':PPJ};

				function myobj(val) {
					this.value = val;
				}
				
				var tisI = new myobj(0);
				var orsI = new myobj(0);
				var ppjI = new myobj(0);
				var aps2I = new myobj(0);

				var iniTis = -1, iniOrs = -1, iniPpj = -1, iniAps2 = -1;
				//console.log(facebookFeed);

				
				
			

					setInterval(function() {

					tisI.value = (tisI.value + 1) % facebookFeed['TIS'].length;
					var d = new Date(facebookFeed['TIS'][tisI.value].time);
					//console.log(d);
					var formatedDate = d.getDate() + ". " + (d.getMonth()+1) + ". " +  d.getFullYear();
					//console.log(facebookFeed['TIS'][tisI.value]);
					$("#fbfeed4").html("<th><a href='https://www.facebook.com/" + facebookFeed['TIS'][tisI.value].userid + "'>@"+ facebookFeed['TIS'][tisI.value].name +"</a> - <a href='" + facebookFeed['TIS'][tisI.value].link + "'> "+ formatedDate	 +"</a>: "+ facebookFeed['TIS'][tisI.value].msg.substring(facebookFeed['TIS'][tisI.value].msg.indexOf("]")+1) +"</th>");



				}, 4000);


					setInterval(function() {

					orsI.value = (orsI.value + 1) % facebookFeed['ORS'].length;
					var d = new Date(facebookFeed['ORS'][orsI.value].time);
					//console.log(d);
					var formatedDate = d.getDate() + ". " + (d.getMonth()+1) + ". " +  d.getFullYear();
					//console.log(facebookFeed['ORS'][orsI.value]);
					$("#fbfeed2").html("<th><a href='https://www.facebook.com/" + facebookFeed['ORS'][orsI.value].userid + "'>@"+ facebookFeed['ORS'][orsI.value].name +"</a> - <a href='" + facebookFeed['ORS'][orsI.value].link + "'> "+ formatedDate	 +"</a>: "+ facebookFeed['ORS'][orsI.value].msg.substring(facebookFeed['ORS'][orsI.value].msg.indexOf("]")+1) +"</th>");



				}, 4000);

					setInterval(function() {

					aps2I.value = (aps2I.value + 1) % facebookFeed['APS2'].length;
					var d = new Date(facebookFeed['APS2'][aps2I.value].time);
					//console.log(d);
					var formatedDate = d.getDate() + ". " + (d.getMonth()+1) + ". " +  d.getFullYear();
					//console.log(facebookFeed['APS2'][aps2I.value]);
					$("#fbfeed1").html("<th><a href='https://www.facebook.com/" + facebookFeed['APS2'][aps2I.value].userid + "'>@"+ facebookFeed['APS2'][aps2I.value].name +"</a> - <a href='" + facebookFeed['APS2'][aps2I.value].link + "'> "+ formatedDate	 +"</a>: "+ facebookFeed['APS2'][aps2I.value].msg.substring(facebookFeed['APS2'][aps2I.value].msg.indexOf("]")+1) +"</th>");



				}, 4000);

					if(facebookFeed['PPJ'].length > 0) {
						setInterval(function() {

						ppjI.value = (ppjI.value + 1) % facebookFeed['PPJ'].length;
						var d = new Date(facebookFeed['PPJ'][ppjI.value].time);
						//console.log(d);
						var formatedDate = d.getDate() + ". " + (d.getMonth()+1) + ". " +  d.getFullYear();
						//console.log(facebookFeed['PPJ'][ppjI.value]);
						$("#fbfeed3").html("<th><a href='https://www.facebook.com/" + facebookFeed['PPJ'][ppjI.value].userid + "'>@"+ facebookFeed['PPJ'][ppjI.value].name +"</a> - <a href='" + facebookFeed['PPJ'][ppjI.value].link + "'> "+ formatedDate	 +"</a>: "+ facebookFeed['PPJ'][ppjI.value].msg.substring(facebookFeed['PPJ'][ppjI.value].msg.indexOf("]")+1) +"</th>");
						
					}, 4000);
				} else {
					$("#fbfeed3").html("<th>NI NEDAVNIH OBJAV</th>");
				}

		        //console.log(facebookFeed);		// tukaj notri so shranjeni vsi podatki za facebook feed ! asociativni array ('msg', 'link', 'userid' in 'time')

		      } else {
		      	//console.log(response.error);
		      }

		    }
		);    
	  });

	});


		</script>



		<!--<script src='/socket.io/socket.io.js' type='text/javascript'></script>-->
		
	</body>
</html>
